@using BlazorBarcodeScanner.ZXing.JS
@inject IJSRuntime JS

<Row>
    <Alert>
        
    </Alert>
</Row>
<Row Flex="Flex.JustifyContent.Center">
    <BarcodeReader @ref=_readerRef Title="Scan Barcode from Camera"
                   StartCameraAutomatically="false"
                   OnBarcodeReceived="LocalReceivedBarcodeText"
                   ShowStart="false"
                   ShowReset="false"
                   ShowResult="false"
                   ShowToggleTorch="false"
                   VideoWidth="300"
                   VideoHeight="300" />
</Row>
<Row Flex="Flex.JustifyContent.Center">
    <Button Clicked="InitCamera" Color="Color.Primary">Iniciar Cámara <Icon Name="IconName.Camera" /></Button>
</Row>

@code {
    private BarcodeReader? _readerRef;

    private string LocalBarcodeText = null!;

    private void InitCamera()
    {
        _readerRef!.StartDecoding();
    }

    private void LocalReceivedBarcodeText(BarcodeReceivedEventArgs args)
    {
        LocalBarcodeText = args.BarcodeText;
        StateHasChanged();
    }
}
